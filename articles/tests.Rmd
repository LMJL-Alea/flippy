---
title: "Untitled"
author: "Aymeric Stamm"
date: "9/20/2021"
output: html_document
---

```{r setup, include=FALSE}
library(reticulate)
conda_create("r-reticulate")
conda_install("scipy", envname = "r-reticulate")
conda_install("../", envname = "r-reticulate", pip = TRUE)
old_py <- Sys.getenv("RETICULATE_PYTHON")
Sys.unsetenv("RETICULATE_PYTHON")
use_condaenv("r-reticulate")
```

```{r py-config}
py_config()
```

```{python}
import flippy
from scipy.stats import norm
```

```{python}
flippy.phipson_smyth_pvalue(10, 50, 1000)
```

```{r}
flipr:::phipson_smyth_pvalue(10, 50, 1000)
```

```{python}
data = norm.rvs(0, 1, size = 100)
flippy.stats2pvalue(0, data, 1000)
```

```{r}
flipr:::stats2pvalue(1, py$data, 1000)
```


```{r clean}
Sys.setenv(RETICULATE_PYTHON = old_py)
```
